pipeline {
    agent any

    stages {
        stage('Clone') {
            steps {
                git branch: 'pipeline', url: 'https://github.com/MarcioDT/teste-api-ebac.git'                
            }
        }
        stage('Instalando Dependencias') {
            steps {
               bat 'npm install'
            }
        }        
        stage('Teste') {
            steps {
               it('Deve listar usuÃ¡rios cadastrados', () => {
    cy.request({
      method: 'GET',
      url: 'usuarios'
    }).should((response)=>{
        expect(response.status).equal(200)
        expect(response.body).to.have.property('usuarios')
            
      }) 
  });
            }
        }
    }
}